# This is an example Hyprland config file.
#
# Refer to the wiki for more information.

#
# Please note not all available settings / options are set here.
# For a full list, see the wiki
#

# See https://wiki.hyprland.org/Configuring/Monitors/
monitor=,preferred,auto,1
# monitor=,preferred,auto,1.10,bitdepth,10
# monitor=HDMI-A-2,3440x1440@50,auto,1.10
#
monitor=DP-1, modeline 1086.75 3440 3744 4128 4816 1440 1443 1453 1568 -hsync +vsync, auto, 1.1, bitdepth, 10
monitor=HDMI-A-3,disabled
monitor=DP-2,disabled
# monitor=DP-2, modeline 1086.75 3440 3744 4128 4816 1440 1443 1453 1568 -hsync +vsync, auto, 1.1, bitdepth, 10
# monitor=DP-3,disabled
# monitor=DP-3,3840x2160@120,auto,2
# monitor=HDMI-A-3,3840x2160@120,auto,2
monitor=DP-3,addreserved,40,100,0,0
monitor=HDMI-A-3,addreserved,40,100,0,0
#
# monitor=DP-2,disabled

# env = WLR_DRM_DEVICES,/dev/dri/card1
env = WLR_DRM_DEVICES,/dev/dri/card0

# env = WLR_NO_HARDWARE_CURSORS,1

xwayland {
  force_zero_scaling = true
}

exec = echo "Xft.dpi: 116" | xrdb -merge
#exec-once = waybar

# exec-once = eww daemon && eww open bar && eww open bgdecor && eww open osd
exec-once = ags &
exec-once = wl-paste --watch cliphist store &
exec-once = dbus-update-activation-environment --all &
exec-once = /usr/bin/gnome-keyring-daemon --start --components=secrets &
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
exec-once = swww init; sleep 0.2; swww img $HOME/.config/eww/images/wallpaper/wallpaper --transition-duration 1
# exec-once = sleep 2; $HOME/.config/awesome/scripts/sound.sh &
# exec-once = ibus-daemon --xim -d -r
# exec-once = ibus engine xkb:us::eng
exec-once = $XDG_CONFIG_HOME/hypr/scripts/process_startup.sh
exec = easyeffects --gapplication-service

# plugin = $HOME/.config/hypr/plugins/libhy3.so
# plugin = $HOME/.config/hypr/plugins/csgo-vulkan-fix.so

# See https://wiki.hyprland.org/Configuring/Keywords/ for more

# Execute your favorite apps at launch
# exec-once = waybar & hyprpaper & firefox

# Source a file (multi-file configs)
# source = ~/.config/hypr/myColors.conf

# Some default env vars.
env = XCURSOR_SIZE,24
# env = WLR_DRM_NO_ATOMIC,1

# For all categories, see https://wiki.hyprland.org/Configuring/Variables/
input {
    kb_layout = de
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    follow_mouse = 1
    #force_no_accel = true
    accel_profile = flat

    touchpad {
        natural_scroll = false
    }

    sensitivity = 0.36 # -1.0 - 1.0, 0 means no modification.
}

general {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
    gaps_in = 4
    gaps_out = 4
    border_size = 2
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)

    layout = hy3
    # allow_tearing = true
}

# windowrulev2 = immediate, class:^(cs2)$

debug {
	# overlay = true
	# damage_blink = 0
}

decoration {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
    rounding = 10

    # blur {
    #     enabled = true
    #     size = 3
    #     passes = 1
    # }

    blur {
        enabled = true
        # xray = true
        size = 7
        passes = 3
        new_optimizations = on

        special = true

        noise = 0.05
        contrast = 1.3
        brightness = 0.95

        #contrast = 1
        #brightness = 1

    }

    drop_shadow = true
    shadow_range = 4
    shadow_render_power = 3
    col.shadow = rgba(1a1a1aee)
}

animations {
    enabled = true

    # Some default animations, see https://wiki.hyprland.org/Configuring/Animations/ for more

    # bezier = myBezier, 0.05, 1.2, 0.1, 1.05
    #
    # animation = windows, 1, 7, myBezier
    # animation = windowsOut, 1, 7, default, popin 80%
    # animation = border, 1, 10, default
    # animation = borderangle, 1, 8, default
    # animation = fade, 1, 7, default
    # animation = workspaces, 1, 6, default

    bezier = md3_standard, 0.2, 0.0, 0, 1.0
    bezier = md3_decel, 0.05, 0.7, 0.1, 1
    bezier = md3_accel, 0.3, 0, 0.8, 0.15
    bezier = overshot, 0.05, 0.9, 0.1, 1.05
    bezier = hyprnostretch, 0.05, 0.9, 0.1, 1.0
    bezier = win11, 0, 1, 0, 1
    bezier = gnome, 0, 0.85, 0.3, 1
    bezier = funky, 0.46, 0.35, -0.2, 1.2
    bezier = linear, 1, 1, 0, 0
    # Animation configs
    animation = windows, 1, 3, md3_decel, popin 60%
    animation = border, 1, 10, default
    animation = fade, 1, 4, default
    animation = workspaces, 1, 4, md3_decel
}

dwindle {
    # See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
    pseudotile = true # master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = true # you probably want this
    smart_split = true
    force_split = 2
}

master {
    # See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
    new_is_master = true
}

gestures {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
    workspace_swipe = false
}

misc {
    vrr = 2
    # enable_swallow = true
    swallow_regex = ^(Alacritty|org.wezfurlong.wezterm)$
    # groupbar_gradients = false
    # groupbar_titles_font_size = 11
}


plugin {
    nstack {
        layout {
          orientation=right
          new_on_top=0
          new_is_master=0
          no_gaps_when_only=0
          special_scale_factor=0.8
          inherit_fullscreen=1
          stacks=3
          center_single_master=0
          mfact=0.5
        }
    }

    hy3 {
        # autotiling settings
        autotile {
            enable = false
        }

        special_scale_factor = 0.8

        tabs {
            height: 20
            text_height: 12
        }
    }
}

######## Layer rules ########
layerrule = blur, eww
layerrule = ignorealpha 0.69, eww
layerrule = noanim, eww
layerrule = blur, eww-lowopacity
layerrule = ignorealpha 0.39, eww-lowopacity
layerrule = blur, supercontext
layerrule = ignorealpha 0.84, supercontext
layerrule = blur, gtk-layer-shell
layerrule = ignorezero, gtk-layer-shell
layerrule = blur, launcher
layerrule = blur, dashboard
layerrule = ignorezero, launcher
layerrule = blur, notifications
layerrule = ignorealpha 0.69, notifications

layerrule = noanim, .*

layerrule = blur, eww
layerrule = ignorealpha 0.8, eww
layerrule = noanim, noanim
layerrule = blur, noanim
layerrule = blur, gtk-layer-shell
layerrule = ignorezero, gtk-layer-shell
layerrule = blur, launcher
layerrule = ignorealpha 0.5, launcher
layerrule = blur, notifications
layerrule = ignorealpha 0.69, notifications

# ags
layerrule = blur, bar
layerrule = ignorealpha 0.15, bar
layerrule = blur, corner.*
layerrule = ignorealpha 0.69, corner.*
layerrule = blur, indicator.*
layerrule = ignorealpha 0.69, indicator.*
layerrule = blur, overview
layerrule = ignorealpha 0.69, overview
layerrule = blur, cheatsheet
layerrule = ignorealpha 0.69, cheatsheet
layerrule = blur, sideright
layerrule = ignorealpha 0.69, sideright
layerrule = blur, sideleft
layerrule = ignorealpha 0.69, sideleft
layerrule = blur, indicatorundefined
layerrule = ignorealpha 0.69, indicatorundefined
layerrule = blur, osk


# Example windowrule v1
# windowrule = float, ^(kitty)$
# Example windowrule v2
# windowrulev2 = float,class:^(kitty)$,title:^(kitty)$
# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
#

# See https://wiki.hyprland.org/Configuring/Keywords/ for more
$mainMod = SUPER

# Example binds, see https://wiki.hyprland.org/Configuring/Binds/ for more
bind = $mainMod, Q, killactive
bind = $mainMod, Return, exec, wezterm
bind = $mainMod, B, exec, brave --incognito
# bind = $mainMod SHIFT, B, exec, ~/.config/hypr/scripts/toggle-topbar.sh
bind = $mainMod SHIFT, B, exec, ags -t 'bar'
bind = $mainMod SHIFT, Q, exit,
bind = $mainMod, N, exec, nautilus
bind = $mainMod, F, togglefloating
bind = $mainMod SHIFT, F, fakefullscreen
bind = $mainMod CONTROL, F, fullscreen, 1
bind = $mainMod ALT_L, F, fullscreen, 0
# bind = $mainMod, Space, exec, ~/.config/eww/scripts/toggle-powerview.sh --keypress &
bind = $mainMod, Space, exec, ags -t 'overview'
# bind = $mainMod CONTROL, Space, exec, ~/.config/eww/scripts/toggle-dashboard.sh &

bind = $mainMod CONTROL, mouse:273, exec, ~/.config/eww/scripts/toggle-supercontext.sh &
bind = $mainMod, P, pseudo, # dwindle
bind = $mainMod, J, togglesplit, # dwindle
bind = $mainMod, G, togglegroup

# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# bind = $mainMod, D, hy3:makegroup, h
# bind = $mainMod, S, hy3:makegroup, v
# bind = $mainMod SHIFT, D, hy3:changegroup, opposite
# bind = $mainMod, Y, hy3:makegroup, tab, force_ephemeral
bind = $mainMod, Y, togglegroup

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

bind = $mainMod, KP_End, workspace, 1
bind = $mainMod, KP_Down, workspace, 2
bind = $mainMod, KP_Next, workspace, 3
bind = $mainMod, KP_Left, workspace, 4
bind = $mainMod, KP_Begin, workspace, 5
bind = $mainMod, KP_Right, workspace, 6
bind = $mainMod, KP_Home, workspace, 7
bind = $mainMod, KP_Up, workspace, 8
bind = $mainMod, KP_Prior, workspace, 9
bind = $mainMod, KP_Insert, workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

bind = $mainMod, C, exec, $XDG_CONFIG_HOME/hypr/scripts/toggle_special.sh
bind = $mainMod SHIFT, C, movetoworkspacesilent, special

bind = $mainMod SHIFT, KP_End, workspace, 1
bind = $mainMod SHIFT, KP_Down, workspace, 2
bind = $mainMod SHIFT, KP_Next, workspace, 3
bind = $mainMod SHIFT, KP_Left, workspace, 4
bind = $mainMod SHIFT, KP_Begin, workspace,R5
bind = $mainMod SHIFT, KP_Right, workspace, 6
bind = $mainMod SHIFT, KP_Home, workspace, 7
bind = $mainMod SHIFT, KP_Up, workspace, 8
bind = $mainMod SHIFT, KP_Prior, workspace, 9
bind = $mainMod SHIFT, KP_Insert, workspace, 10

# Scroll through existing workspaces with mainMod + scroll
# bind = $mainMod, mouse_down, hy3:focustab, l
# bind = $mainMod, mouse_up, hy3:focustab, r
# bindn = , mouse:272, hy3:focustab, mouse
#
bind = $mainMod, mouse_down, changegroupactive, b
bind = $mainMod, mouse_up, changegroupactive, f
#
# bind = $mainMod SHIFT, R, hy3:changegroup, toggletab
# bind = $mainMod CONTROL, R, hy3:movewindow, left, visible
#
bind = $mainMod CONTROL, R, moveoutofgroup

# Screenshot (grim, wl-clipboard, wayshot, surp)
bind = $mainMod, Print, exec, grimblast copy area
bind = $mainMod SHIFT, Print, exec, grimblast save area
bind = $mainMod CONTROL, Print, exec, grimblast copysave area

bind = $mainMod, TAB, workspace, e+1

bind = $mainMod, X, resizeactive, exact 66% 100%
bind = $mainMod CONTROL, X, resizeactive, exact 50% 100%

# Volume
bindl=,XF86AudioMute, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle
bindle=,XF86AudioRaiseVolume, exec, pamixer -i 3
bindle=,XF86AudioLowerVolume, exec, pamixer -d 3
# bindle=,XF86AudioRaiseVolume, exec, ~/.config/eww/scripts/volume osd &
# bindle=,XF86AudioLowerVolume, exec, ~/.config/eww/scripts/volume osd &

bindle = , XF86AudioRaiseVolume, exec, ags -r 'indicator.popup(1);'
bindle = , XF86AudioLowerVolume, exec, ags -r 'indicator.popup(1);'

bindl=,XF86AudioMute, exec, ~/.config/eww/scripts/volume osd &
bind = $mainMod SHIFT, up, exec, pamixer -i 3
# bindle = $mainMod SHIFT, up, exec, ~/.config/eww/scripts/volume osd &
bindle = $mainMod SHIFT, up, exec, ags -r 'indicator.popup(1);'
bind = $mainMod SHIFT, down, exec, pamixer -d 3
# bindle = $mainMod SHIFT, down, exec, ~/.config/eww/scripts/volume osd &
bindle = $mainMod SHIFT, down, exec, ags -r 'indicator.popup(1);'

bind = $mainMod SHIFT, L, exec, gtklock &

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# will switch to a submap called resize
bind=ALT,R,submap,resize

# will start a submap called "resize"
submap=resize

# sets repeatable binds for resizing the active window
binde=,right,resizeactive,10 0
binde=,left,resizeactive,-10 0
binde=,up,resizeactive,0 -10
binde=,down,resizeactive,0 10

# use reset to go back to the global submap
bind=,escape,submap,reset

# will reset the submap, meaning end the current one and return to the global one
submap=reset

# Dynamic colors
source=$HOME/.config/hypr/colors.conf
